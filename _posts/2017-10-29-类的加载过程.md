---
title: 类的加载过程
date: 2017-10-29
categories: JVM
tags:
- 类
- 加载过程
---



类的整个生命周期包括：

加载、验证、准备、解析、初始化、使用和卸载七个阶段。



<!-- begin -->
如图：![过程](http://wiki.jikexueyuan.com/project/java-vm/images/classonload.png)

1.加载：
-通过一个类的全限定名来获取其定义的二进制字节流。
-将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构。
-在 Java 堆中生成一个代表这个类的 java.lang.Class 对象，作为对方法区中这些数据的访问入口。
2.验证
验证的目的是为了确保Class文件中的字节流包含的信息符合当前虚拟机的要求，而且不会危害虚拟机自身的安全。不同的虚拟机对类验证的实现可能会有所不同，但大致都会完成以下四个阶段的验证：
-文件格式的验证
-元数据的验证
-字节码验证
-符号引用验证
3.准备
准备阶段是正式为类变量分配内存并设置类变量初始值的阶段，这些内存都将在方法区中分配。
4.解析
解析阶段是虚拟机将常量池中的符号引用转化为直接引用。
5.初始化
初始化阶段是执行类构造器()方法的过程