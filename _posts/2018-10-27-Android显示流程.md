---
title: QUIC
date: 2018-08-17
categories: 技术
tags:
- 网络
- 谷歌
- 协议
---

QUIC 全称 Quick UDP Internet Connection ，是谷歌基于UDP上改进的一种网络协议，主要是在应用层实现。


<!---begin--->


背景：
---

我们都知道 像TCP或者IP这种协议是由系统实现的，因为这样的话就不用每个应用重复实现一次了，但这也会有缺点，就是一些比较久的系统的更新机制比较差，或者说直接就不更新了，导致上面的协议也就不能更新了。
所以有人这样评价http2.0  “对HTTP 2.0 而言，TCP 很可能就是下一个性能瓶颈”。

所以在此背景下谷歌发布了QUIC协议（至于是要取代/改进tcp，还是作为一个临时方案就不得而知了）。


QUIC：
-----

QUIC是下层使用UDP传输，它自己做可靠保证和数据安全，向上层提供服务，与tcp，udp的结构如下图。

![此处输入图片的描述](https://raw.githubusercontent.com/neo1946/neo1946.github.io/master/assets/images/QUIC.png)

特性1：应用层实现，可以快速迭代升级，缺点是要依赖软件实现，现阶段支持率不算太高，特别在移动端。

特性2：TCP链接基于IP地址与端口，当网络切换的时候要重新建立链接；QUIC通过设备ID标识用户，在链接切换后可以保持之前的会话。

特性3：由于QUIC基于UDP，所以是无序传输的，QUIC对数据进行重新排序后交给上层。

特性4：TCP采用 **重传** 机制，而QUIC采用 **纠错** 机制。通过连续的几个数据包的校验和，可以直接恢复出丢失的包内容，而不需要重传。

特性5：在建立 TCP 连接时，需要进行至少三次握手，如果要开启 TLS 加密，则还需要进行 TLS 握手。而 QUIC 采用了类似于 TCP Fast Open 的技术，如果之前连接过，那么之后可以不用重复握手而直接开始传送数据，以实现 0-RTT 往返时延。即便之前没有连接过，也可以在 1-RTT 内完成连接并开始传送数据。并且自身就拥有与 TLS 等效的加密措施。

特性6：QUIC 的多路复用和 HTTP2 类似。在一条 QUIC 连接上可以并发发送多个 HTTP 请求 (stream)。


总结：
---

QUIC在移动场景上的优势还是很明显的（移动端的网络切换，短连接少数据时候提升的握手速度，对丢包率高的网络的优化），但是在现阶段的使用上还是有些许的问题的（例如运营商UDP的带宽明显比TCP少很多很多）。总体上还是看好这个技术。