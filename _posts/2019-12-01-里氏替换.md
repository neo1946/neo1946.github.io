---
title: 里氏替换
date: 2019-12-01
categories: java
tags:

- java
- 设计模式
---

今天有个学弟问我，里氏替换的问题，我都已经忘记了这个东西了，刚好就复习一下。

<!---begin--->
先详细说说什么是里氏替换原则：
里氏替换原则为继承定义的规范：

1. 子类必须完全实现父类的方法

2. 子类可以有自己的个性

3. 覆盖或实现父类的方法时输入参数可以被放大

4. 覆写或实现父类的方法时输出结果可以被缩小

前2个非常好理解

下面着重说下第三个，我的理解是如果你对父类的方法进行缩小，那么如果有一天调用方由父类变成了子类，那么有一部分父类的行为将会发生变化。
下面我再举个例子。
我们假设有个类，人，父类是会画🐉，子类通过重载既能画🐉又能画🐛，画是个方法，他的参数是笔或者粉笔，笔是粉笔的父类。
如果是不符合里氏替换，也就是父类使用笔来画🐉，子类通过重载使用粉笔来画🐛。
假设你是雇主，你问我要一个人来画画，只要会画🐉就好，也就是只要一个father，但是我管你要什么，我塞给你一个son就完事了，以为他既能画🐉又能画🐛。
但是你发现，无论给他是画笔，还是笔，他都能画龙，于是你就随便给了。
![ls1](https://github.com/neo1946/neo1946.github.io/blob/master/assets/images/ls1.png)
画是画完了，完成了任务，但是下次你说要升级，想要再画2条🐛，于是我说我给你的人本来就是都能画，你把他当成是son，你只要给他粉笔他就能画🐛了。
于是乎你改了接口，然后新写2行代码让他画虫。
![ls2](https://github.com/neo1946/neo1946.github.io/blob/master/assets/images/ls2.png)
结果🐛是画了，但是你发现原来的第二个龙变成了虫？

如果把上面的改成符合里氏替换：
我给你个人，他能画🐉，但是需要给粉笔才能画。
![ls3](https://github.com/neo1946/neo1946.github.io/blob/master/assets/images/ls3.png)
你按照规范给粉笔了，2条🐉画好了。
那你下次说想要多画2条🐛，我还是原来的口吻说，我给你的人本来就是都能画，你把他当成是son，你只要给他笔他就能画🐛了。
![ls4](https://github.com/neo1946/neo1946.github.io/blob/master/assets/images/ls4.png)
于是乎你改了接口，然后新写2行代码让他画虫。最后工作完满完成。

这个例子很直白，就是如果你重载父类方法的时候如果将参数缩小，那么在使用者替换的时候可能会使得之前的一部分行为发生变化，导致异常，除非你仔细的去检查，而且有时候你使用的参数也可能是个泛型，你也未必能检查清楚。如果你写的符合里氏替换，那么调用的就不会有这样的麻烦了，这就是设计模式的作用，使用规范来减少可能的误解。